# 1.0 - Evolução do Schema (SQL)

## Objetivo
- Adaptar a estrutura do banco de dados para suportar a conciliação individual de itens, evitando o parsing de JSONB e permitindo buscas performáticas.

## Escopo / Entregáveis
- Script SQL para evolução da tabela `similaridade_itens`.
- Adição de índices para otimização de busca por processo e status.

## Passos e subtarefas
- 1.1 Adicionar colunas: `numero_processo`, `texto_publicacao`, `data_publicacao`, `prazo_dias`, `data_vencimento`, `hash_publicacao` e `embedding`.
- 1.2 Criar índices `idx_sim_itens_processo` e `idx_sim_itens_status`.
- 1.3 Validar a existência da tabela `similaridade_descartes_auditoria` conforme script original.

## Dependências
- Scripts SQL existentes em `scripts/sql/`.

## Paralelizável?
- Não. É a base para todas as outras tarefas.

## Critérios de aceite
- Tabela `similaridade_itens` deve possuir todas as colunas do PRD (RF1).
- O comando `\d similaridade_itens` no psql deve mostrar as novas colunas e índices.

## Testes
- 1.4 Testar inserção manual de um registro nas novas colunas para validar tipos de dados.

## Notas
- O tipo `vector` depende da extensão `pgvector`. Certifique-se de que está instalada se for usar embeddings.
